はじめに

このアプリはPHPを独学で学習している私がアウトプットの１つとして作成したもので、セキュリティなどに問題があるかもしれません。  
もし実際にアプリを動作させるような場合はローカル環境で動作させてください。
あと、もし眼に余るようなトンデモナイ記述をしていたらそっと<a href="https://twitter.com/float_top">ツイッター</a>のDMにでも連絡いただければ幸いです。(；´Д`)


アプリ名
====
**<a href="https://board.kagomeee.com/">画像掲示板</a>**
<img src="https://user-images.githubusercontent.com/52596476/64936282-14f4f980-d890-11e9-90a1-cf003d926c62.png" width=1000>

## 簡単な説明
会員制の画像の投稿が可能な掲示板です。  
投稿画像は２００×１４０のサムネイルとして表示されて、クリックすると元画像が別ウインドウで表れます。


## 機能
1. 会員登録機能
1. 会員情報変更機能
1. 退会機能
1. ユーザーアイコン表示機能
1. コンテンツ投稿機能
1. コンテンツ削除
1. 返信機能
1. サムネイル画像表示機能
1. 画像詳細表示機能
1. 投稿制限機能


## 開発環境
使用言語・データーベース
* PHP
* HTML
* CSS(SCSS)
* MYSQL  

使用ツール・ライブラリ
* bootstrap4
* MAMP
* Atom Editor  
* jquery
* fontawesome


## 作った感想と今後の課題  

念願？のサムネイル表示機能を搭載した画像投稿掲示板となります。  
投稿された画像は、元サイズ画像は`images/Proto_img`で管理。サイズ加工処理された画像は`images/Compre_img`で管理しています。  
投稿に対しての返信投稿に添付された画像は、元サイズ画像は`images/Reply_Proto_img`で管理。加工画像は`images/Reply_Compre_img`で管理しています。ユーザーのアイコン画像も同じ処理で元画像と加工画像を別フォルダで管理しています。  
今回１番悩まされたのはコンテンツの削除処理と退会処理でした。今までの制作物ではデータベース上の情報だけ削除すればよかったのですが、今回は画像ファイルも削除しなければなりませんでした。  
ある投稿に対して削除要請されたとして、もしその投稿に対して別ユーザーが画像付きの返信を投稿していた場合、連動してそれらの返信画像も全て画像フォルダ上から削除しなければならず、かなり実装に悩まされました。  
結局画像投稿時の保存処理においてファイル名の命名方法に配慮する事で削除時に狙い通りの処理ができました。
実際のファイル削除処理は`Delete_Post.php`の30〜35行目。 画像投稿時の保存処理は`Posts.Validate.php`の19行目で行なっています。    
また退会処理も同じく、退会ユーザーが投稿した全ての画像ファイルも全て削除しなければならず、これも画像投稿時の命名方法に配慮することで実装できました。
さらに各投稿にある吹き出しアイコンの横に、その投稿に対して付けられた返信数が表示される仕組みなのですが、こちらも削除処理や退会処理の際にその都度投稿数を変更しなければならず、こちらも悩まされました。  
実装が成功してみると割と単純な事なのですが、仕組みを０から考えるのはとても頭を使った気がします。

cookieによる簡易的な投稿制限をしています。デフォルトでは投稿後、次の投稿は１秒後に可能になっています。  
設定は`function/functions.php`の20行目で可能です。
